<!doctype html>
<html lang="sk">
<head>
    <meta charset="utf-8">
    <title>OAuth Hotovo ✅</title>
</head>
<body style="font-family:Arial;">
OAuth úspešne dokončený, môžete zavrieť toto okno.

<script>
    // Získanie dát z URL hash
    const hash = window.location.hash.substring(1);
    const params = new URLSearchParams(hash);
    const token = params.get('access_token');
    const provider = params.get('provider');

    // Over token & provider
    if (window.opener && token && provider) {
        const message = {
            type: 'authorization:github',
            token: token,
            provider: provider
        };

        // Poslanie správy do CMS
        window.opener.postMessage(message, '*');

        // Zatvorenie popup okna po poslaní správy
        setTimeout(() => window.close(), 500);

    } else {
        document.body.innerHTML += "<br>⚠️ Nepodarilo sa získať token alebo nadviazať spojenie s hlavným oknom CMS.";
    }
</script>
</body>
</html>
